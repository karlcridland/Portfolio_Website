<!DOCTYPE html>
<html lang="en-gb">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Karl Cridland</title>
    <link type="text/css" rel="stylesheet" href="css/header.css">
    <link type="text/css" rel="stylesheet" href="css/index.css">
    <link type="text/css" rel="stylesheet" href="css/project_page.css">
  </head>
  <body id="body">
  <div id="header" class="header"></div>
  <div id="main" class="main">
    <div class="project">
      <div id="left" class="half">
        <div class="title" id="title"></div>
        <div class="description" id="description"></div>
        <div class="pictures" id="pictures"></div>
      </div>
      <div id="right" class="half">
        <table class="technical">
          <tr><td class="technicalLeft">Last updated</td><td class="technicalRight" id="updated"></td></tr>
          <tr><td class="technicalLeft">GitHub</td><td class="technicalRight"><a id="github" class="technical"></a></td></tr>
        </table>
      </div>
    </div>
  </div>
  </body>
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,500;0,700;1,100;1,200&display=swap" rel="stylesheet">
  <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-storage.js"></script>
  <script src="javascript/firebase.js"></script>
  <script src="javascript/header.js"></script>
  <script src="javascript/classes/ContactMessage.js"></script>
  <script src="javascript/classes/Project.js"></script>
  <script>

    const urlParams = new URLSearchParams(window.location.search);
    const id = urlParams.get('id');

    ref.child('projects/title/'+id).once('value',snapshot=>{
      document.getElementById('title').textContent = snapshot.val();
    }).then(adjustPictureFrame);

    ref.child('projects/description/'+id).once('value',snapshot=>{
      document.getElementById('description').textContent = snapshot.val();
    }).then(adjustPictureFrame);

    window.onresize = adjustPictureFrame;

    function adjustPictureFrame(){
      const pics = document.getElementById('pictures');
      pics.style.height = 'calc(100% - '+(pics.offsetTop+40)+'px)';
    }

    ref.child('projects/git/'+id).once('value',snapshot=>{
      document.getElementById('github').textContent = snapshot.val();
      document.getElementById('github').href = snapshot.val();
    })

    ref.child('projects/git/'+id).once('value',snapshot=>{
      document.getElementById('github').textContent = snapshot.val();
      document.getElementById('github').href = snapshot.val();
    })

    ref.child('projects/updated/'+id).once('value',snapshot=>{
      document.getElementById('updated').textContent = snapshot.val().toString().getDate();

    })



  </script>
</html>
